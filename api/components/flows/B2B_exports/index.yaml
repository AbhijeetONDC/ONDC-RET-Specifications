summary: B2B Exports
description: The following is an illustrative flow to perform a transaction of a nature where a buyer would like to order bulk items
details:
  - description: Buyer Search & Quotation
    mermaidGraph: >-
      sequenceDiagram

        participant Buyer
        participant BuyerApp
        participant Gateway
        participant SellerApp1
        participant SellerApp2

        note over Buyer, SellerApp2: **SEARCH FLOW**

        Buyer->>BuyerApp: Search for a product 
        BuyerApp->>Gateway: **/search** - Search for a product<br/>Country and City defined in Context
        Gateway->>SellerApp1: **/search** - Search for a product<br/>Broadcast based on Country and domain in Context
        Gateway->>SellerApp2: **/search** - Search for a product <br/>Broadcast based on Country and domain in Context

        SellerApp1->>BuyerApp:**/on_search** - Product catalog returned (including <br/> add-ons, variants, offers + Communication channel) <br/> Servicability based on Country, City and HScode permits
        SellerApp2->>BuyerApp:**/on_search** - Product catalog returned (including <br/> add-ons, variants, offers + Communication channel) <br/>  Servicability based on Country, City and HScode permits
        BuyerApp->>Buyer: Renders the search response
        
        note left of Buyer: Offline communication <br/>b/w buyer and seller <br/>happens on the communication <br/>channel

  - description: RFQ (Request For Quotation) FLOW
    mermaidGraph: >-
      sequenceDiagram

        note over Buyer, SellerApp2: **RFQ (Request For Quotation) FLOW**

        Buyer->>BuyerApp: Buyer requests for Quotation
        BuyerApp->>SellerApp1: **/select** - An item/s + add_ons + variants + offers is selected and <br/> RFQ is raised with a TTL to receive the response

        note right of SellerApp1: Logistics quotation + TAT received (Optional)

        SellerApp1->>BuyerApp: **/on_select** - Responds to RFQ with <br/> quote, breakup including logistics charges.
        BuyerApp->>Buyer: RFQ Response


  - description: REQUEST FOR QUOTATION
    mermaidGraph: >-
      sequenceDiagram

        note over Buyer, SellerApp2: **REQUEST FOR QUOTATION**

        Buyer->>BuyerApp: 
        BuyerApp->>SellerApp1: **/init** - Request for Quotation
        note right of SellerApp1: Logistics quotation + TAT received (Optional if already received)
        SellerApp1->>BuyerApp: **/on_init** - Respond to RFQ <br/>Appending Logistics Charges
        BuyerApp->>Buyer: 

  - description: PURCHASE ORDER
    mermaidGraph: >-
      sequenceDiagram
        note over Buyer, SellerApp2: **PURCHASE ORDER**

        Buyer->>BuyerApp: Creates PO
        BuyerApp->>SellerApp1: **/confirm** - Create PO
        SellerApp1->>BuyerApp: **/on_confirm** - Accept PO

  - description: PAYMENT AND INVOICE CREATION
    mermaidGraph: >-
      sequenceDiagram
        note over Buyer, SellerApp2: **PAYMENT AND INVOICE CREATION**

        note left of Buyer: Payment is made offline

        Buyer->>BuyerApp: Requests Invoice and Payment Details
        BuyerApp->>SellerApp1: /**update** - Requests Invoice and sends Payment status (If payment collected by BAP)<br/>
        SellerApp1->>BuyerApp: **/on_update** - sends Payment status (If payment collected by BPP)



  - description: Requests for order status
    mermaidGraph: >-
      sequenceDiagram

        BuyerApp-->>SellerApp1: **/status** - Requests for order status <br/>                

        SellerApp1->>BuyerApp: **/on_update** - Invoice is sent
        BuyerApp->>Buyer: Invoice is sent


        note over Buyer, SellerApp2: **STATUS OF SHIPMENT**

        Buyer->>BuyerApp: Checks order status
        BuyerApp->>SellerApp1: **/status** - Enquire Order status or Tracking info
        SellerApp1->>BuyerApp: **/on_status** - Order Status or tracking link is sent

reference: if any
steps:
  - summary: Search for an item
    api: search
    description: Buyer outside India searches for a product
    reference: if any
    example:
      $ref: "../../Examples/B2B/search/search_by_item.yaml"
  - summary: Returns item/ catalog
    api: on_search
    description: Seller responds with catalog + communication channel
    reference: if any
    example:
      $ref: "../../Examples/B2B/on_search/on_search.yaml"
  - summary: Requests for Quotation
    api: select
    description: Buyer selects an item (Variants/add-ons/offers as required) + Item customization + Delivery terms and requests for quotation
    reference: if any
    example:
      $ref: "../../Examples/B2B/select/select_exports.yaml"
  - summary: Returns item breakup/ quote
    api: on_select
    description: Seller provides the quotation and breakup with logistics charges
    reference: if any
    example:
      $ref: "../../Examples/B2B/on_select/on_select_exports.yaml"
  - summary: Initialization of Order
    api: init
    description: Initialization of Order - Billing Details added.
    reference: if any
    example:
      $ref: "../../Examples/B2B/init/init_exports.yaml"
  - summary: Initialization of Order
    api: on_init
    description: Initialization of Order with final quote
    reference: if any
    example:
      $ref: "../../Examples/B2B/on_init/on_init_exports.yaml"
  - summary: Buyer raises PO
    api: confirm
    description: Buyer creates a Purchase Order
    reference: if any
    example:
      $ref: "../../Examples/B2B/confirm/confirm_exports.yaml"
  - summary: Seller Accepts PO
    api: on_confirm
    description: Seller accepts Purchase Order
    reference: if any
    example:
      $ref: "../../Examples/B2B/on_confirm/on_confirm_exports.yaml"
  - summary: Consumer platform requests for latest status
    api: status
    description: Buyer requests for Shipment status
    reference: if any
    example:
      $ref: "../../Examples/B2B/status/status.yaml"
  - summary: Provider platform provides latest order status and sends invoice
    api: on_status
    description: Provider platform provides the updated order status to the consumer and sends invoice
    reference: if any
    example:
      $ref: "../../Examples/B2B/on_status/on_status_proforma_invoice.yaml"
  - summary: Payment details are updated in case BAP collects the payment
    api: update
    description: Payment status is sent (If collected by BAP) + requests for Invoice
    reference: if any
    example:
      $ref: "../../Examples/B2B/update/update_prepaid.yaml"
  - summary: seller updates fulfilments - Multiple fulfillments for Single PO
    api: on_update
    description: seller updates fulfilments - Multiple fulfillments for Single PO
    reference: if any
    example:
      $ref: "../../Examples/B2B/on_update/on_update_fulfillments.yaml"
  - summary: Provider platform provides latest order status
    api: on_status
    description: Provider platform provides the updated order status to the consumer once the order is picked up
    reference: if any
    example:
      $ref: "../../Examples/B2B/on_status/on_status_picked_up.yaml"
  - summary: Provider platform provides latest order status
    api: on_status
    description: Provider platform provides the updated order status to the consumer once the order is out for delivery
    reference: if any
    example:
      $ref: "../../Examples/B2B/on_status/on_status_out_for_delivery.yaml"
  - summary: Provider platform provides latest order status
    api: on_status
    description: Provider platform provides the updated order status to the consumer after the order is delivered
    reference: if any
    example:
      $ref: "../../Examples/B2B/on_status/on_status_delivered.yaml"
